generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int     @id @default(autoincrement())
  name          String
  email         String  @unique
  emailVerified Boolean @default(false)
  phone         String? @unique
  phoneVerified Boolean @default(false)

  role Role @default(USER)

  profile Profile?

  posts Post[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model Profile {
  id          Int       @id @default(autoincrement())
  bio         String
  description Json
  birthdate   DateTime? @db.Date

  userId Int  @unique
  user   User @relation(fields: [userId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model Post {
  id      Int    @id @default(autoincrement())
  title   String
  content String

  authorId Int
  author   User @relation(fields: [authorId], references: [id])

  tags Tag[] @relation()

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

// Many-to-Many: Post <-> Tag (via join table)
model Tag {
  id   Int    @id @default(autoincrement())
  name String @unique

  posts Post[] @relation()

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model AllData {
  id Int @id @default(autoincrement())

  stringField  String
  booleanField Boolean
  intField     Int
  bigIntField  BigInt
  floatField   Float
  decimalField Decimal
  dateField    DateTime
  jsonField    Json
  bytesField   Bytes
  enumField    DataEnum

  optionalStringField  String?
  optionalBooleanField Boolean?
  optionalIntField     Int?
  optionalBigIntField  BigInt?
  optionalFloatField   Float?
  optionalDecimalField Decimal?
  optionalDateField    DateTime?
  optionalJsonField    Json?
  optionalBytesField   Bytes?
  optionalEnumField    DataEnum?

  stringArrayField  String[]
  booleanArrayField Boolean[]
  intArrayField     Int[]
  bigIntArrayField  BigInt[]
  floatArrayField   Float[]
  decimalArrayField Decimal[]
  dateArrayField    DateTime[]
  jsonArrayField    Json[]
  bytesArrayField   Bytes[]
  enumArrayField    DataEnum[]
}

enum DataEnum {
  VALUE1
  VALUE2
  VALUE3
}

enum Role {
  USER
  ADMIN
  MODERATOR
}
